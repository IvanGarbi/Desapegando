@model Desapegando.Application.ViewModels.DashboardViewModel

@{
    Layout = "_Layout";
}
@{
    int[] teste = {1100, 1500, 1600 };

    int produtosDesistidos = Model.NovosCondominos;
    int produtosVendidos = Model.ProdutosVendidos;
    int produtosParaVender = Model.ProdutosDisponiveis;

    int totalVendasPeriodo = 100;
    Random randNum = new Random();
    int[] totalVendasPorPeriodo = new int[30];
    for (int i = 0; i < 30; i++)
    {
        totalVendasPorPeriodo[i] = randNum.Next(150);
    }

    int[] totalVendasPorPeriodo2 = new int[30];
    for (int i = 0; i < 30; i++)
    {
        totalVendasPorPeriodo2[i] = randNum.Next(150);
    }


    var vendas7DiasViewModelArray = Model.Vendas7DiasViewModel.ToArray();
    int valorProduto = 0;

    foreach (var item in Model.Vendas7DiasViewModel)
    {
        valorProduto += item.Quantidade;
    }

    int valorCondominos = 0;

    for (int i = 7; i < 14; i++)
    {
        valorCondominos += Model.NovosCondominos7Dias.ToArray()[i].Quantidade;
    }

    int[] totalVendasUltimos7Dias = { vendas7DiasViewModelArray[0].Quantidade,
                                      vendas7DiasViewModelArray[1].Quantidade,
                                      vendas7DiasViewModelArray[2].Quantidade,
                                      vendas7DiasViewModelArray[3].Quantidade,
                                      vendas7DiasViewModelArray[4].Quantidade,
                                      vendas7DiasViewModelArray[5].Quantidade,
                                      vendas7DiasViewModelArray[6].Quantidade};

    decimal totalProdutosVendidosUltimos7Dias = decimal.Round(Model.TotalProdutosVendidosUltimos7Dias, 0);
    decimal totalProdutosDisponiveisUltimos7Dias = decimal.Round(Model.TotalProdutosDisponiveisUltimos7Dias, 0);
    decimal totalProdutosDesistidosUltimos7Dias = decimal.Round(Model.TotalProdutosDesistidosUltimos7Dias, 0);
    decimal[] totalProdutosVDisDesUltimos7Dias = { totalProdutosVendidosUltimos7Dias, totalProdutosDisponiveisUltimos7Dias, totalProdutosDesistidosUltimos7Dias };


    var novosCondominos7DiasArray = Model.NovosCondominos7Dias.ToArray();
    
    int[] novosCondominosUlitmos7Dias = { novosCondominos7DiasArray[0] != null ? novosCondominos7DiasArray[0].Quantidade : 0,
                                          novosCondominos7DiasArray[1] != null ? novosCondominos7DiasArray[1].Quantidade : 0, 
                                          novosCondominos7DiasArray[2] != null ? novosCondominos7DiasArray[2].Quantidade : 0, 
                                          novosCondominos7DiasArray[3] != null ? novosCondominos7DiasArray[3].Quantidade : 0, 
                                          novosCondominos7DiasArray[4] != null ? novosCondominos7DiasArray[4].Quantidade : 0, 
                                          novosCondominos7DiasArray[5] != null ? novosCondominos7DiasArray[5].Quantidade : 0, 
                                          novosCondominos7DiasArray[6] != null ? novosCondominos7DiasArray[6].Quantidade : 0,
                                          novosCondominos7DiasArray[7] != null ? novosCondominos7DiasArray[7].Quantidade : 0, 
                                          novosCondominos7DiasArray[8] != null ? novosCondominos7DiasArray[8].Quantidade : 0, 
                                          novosCondominos7DiasArray[9] != null ? novosCondominos7DiasArray[9].Quantidade : 0, 
                                          novosCondominos7DiasArray[10] != null ? novosCondominos7DiasArray[10].Quantidade : 0, 
                                          novosCondominos7DiasArray[11] != null ? novosCondominos7DiasArray[11].Quantidade : 0, 
                                          novosCondominos7DiasArray[12] != null ? novosCondominos7DiasArray[12].Quantidade : 0, 
                                          novosCondominos7DiasArray[13] != null ? novosCondominos7DiasArray[13].Quantidade : 0};

    int novasCampanhasDisponiveisUlitmos30Dias = Model.NovasCampanhasDisponiveisUlitmos30Dias;
    int novasCampanhasEncerradasUlitmos30Dias = 100 - novasCampanhasDisponiveisUlitmos30Dias;
    int[] novasCampanhasUlitmos30Dias = { novasCampanhasDisponiveisUlitmos30Dias, novasCampanhasEncerradasUlitmos30Dias };
}


<!-- ===============================================-->
<!--    Main Content-->
<!-- ===============================================-->
<section class="pt-5 pb-9">
    <div class="container-small px-0">
        <div class="pb-5">
            <div class="row g-4">
                <div class="col-12 col-xxl-6">
                    <div class="mb-8">
                        <h2 class="mb-2">Desapegando Dashboard</h2>
                        <h5 class="text-700 fw-semi-bold">Veja o que está acontecendo com o seu negócio agora mesmo</h5>
                    </div>
                    <div class="row align-items-center g-4">
                        <div class="col-12 col-md-auto">
                            <div class="d-flex align-items-center">
                                <img src="~/public/assets/img/icons/illustrations/4l.png" alt="" height="46" width="46" />
                                <div class="ms-3">
                                    <h4 class="mb-0">@produtosVendidos produtos vendidos</h4>
                                    <p class="text-800 fs--1 mb-0">Awating processing</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-auto">
                            <div class="d-flex align-items-center">
                                <img src="~/public/assets/img/icons/illustrations/3l.png" alt="" height="46" width="46" />
                                <div class="ms-3">
                                    <h4 class="mb-0">@produtosParaVender produto à venda</h4>
                                    <p class="text-800 fs--1 mb-0">On hold</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-auto">
                            <div class="d-flex align-items-center">
                                <img src="~/public/assets/img/icons/illustrations/2l.png" alt="" height="46" width="46" />
                                <div class="ms-3">
                                    <h4 class="mb-0">@produtosDesistidos produtos desistidos</h4>
                                    <p class="text-800 fs--1 mb-0">Out of stock</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr class="bg-200 mb-6 mt-4" />
                    <div class="row flex-between-center mb-4 g-3">
                        <div class="col-auto">
                            <h3>Total de vendas</h3>
                            <p class="text-700 lh-sm mb-0">Por período</p>
                        </div>
                        <div class="col-8 col-sm-4">
                            <select class="form-select form-select-sm mt-2" id="select-gross-revenue-month">
                                <option>Mar 1 - 31, 2022</option>
                                <option>April 1 - 30, 2022</option>
                                <option>May 1 - 31, 2022</option>
                            </select>
                        </div>
                    </div>
                    <div class="echart-total-sales-chart" style="min-height:320px;width:100%" data-echart-responsive="data-echart-responsive"></div>
                </div>
                <div class="col-12 col-xxl-6">
                    <div class="row g-3">
                        <div class="col-12 col-md-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between">
                                        <div>
                                            <h5 class="mb-1">Total de vendas<span class="badge badge-phoenix badge-phoenix-warning rounded-pill fs--1 ms-2"><span class="badge-label">-6.8%</span></span></h5>
                                            <h6 class="text-700">Últimos 7 dias</h6>
                                        </div>
                                        <h4>@valorProduto</h4>
                                    </div>
                                    <div class="d-flex justify-content-center px-4 py-6">
                                        <div class="echart-total-orders" style="height:85px;width:115px"></div>
                                    </div>
                                    <div class="mt-2">
                                        <div class="d-flex align-items-center mb-2">
                                            <div class="bullet-item bg-primary me-2"></div>
                                            <h6 class="text-900 fw-semi-bold flex-1 mb-0">Completed</h6>
                                            <h6 class="text-900 fw-semi-bold mb-0">52%</h6>
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <div class="bullet-item bg-primary-100 me-2"></div>
                                            <h6 class="text-900 fw-semi-bold flex-1 mb-0">Pending payment</h6>
                                            <h6 class="text-900 fw-semi-bold mb-0">48%</h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between">
                                        <div>
                                            <h5 class="mb-1">Novos condôminos<span class="badge badge-phoenix badge-phoenix-warning rounded-pill fs--1 ms-2"> <span class="badge-label">+26.5%</span></span></h5>
                                            <h6 class="text-700">Últimos 7 dias</h6>
                                        </div>
                                        <h4>@valorCondominos</h4>
                                    </div>
                                    <div class="pb-0 pt-4">
                                        <div class="echarts-new-customers" style="height:180px;width:100%;" data-echart-responsive="true"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between">
                                        <div>
                                            <h5 class="mb-2">Total produtos</h5>
                                            <h6 class="text-700">Últimos 7 dias</h6>
                                        </div>
                                    </div>
                                    <div class="pb-4 pt-3">
                                        <div class="echart-top-coupons" style="height:115px;width:100%;"></div>
                                    </div>
                                    <div>
                                        <div class="d-flex align-items-center mb-2">
                                            <div class="bullet-item bg-primary me-2"></div>
                                            <h6 class="text-900 fw-semi-bold flex-1 mb-0">Vendidos</h6>
                                            <h6 class="text-900 fw-semi-bold mb-0">@Math.Round((totalProdutosVendidosUltimos7Dias / 100000), 0)%</h6>
                                        </div>
                                        <div class="d-flex align-items-center mb-2">
                                            <div class="bullet-item bg-primary-200 me-2"></div>
                                            <h6 class="text-900 fw-semi-bold flex-1 mb-0">Disponíveis</h6>
                                            <h6 class="text-900 fw-semi-bold mb-0">@Math.Round((totalProdutosDisponiveisUltimos7Dias / 100000), 0)%</h6>
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <div class="bullet-item bg-info-500 me-2"></div>
                                            <h6 class="text-900 fw-semi-bold flex-1 mb-0">Desistidos</h6>
                                            <h6 class="text-900 fw-semi-bold mb-0">@Math.Round((totalProdutosDesistidosUltimos7Dias / 100000), 0)%</h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="card h-100">
                                <div class="card-body d-flex flex-column">
                                    <div class="d-flex justify-content-between">
                                        <div>
                                            <h5 class="mb-2">Novas campanhas</h5>
                                            <h6 class="text-700">Últimos 30 dias</h6>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-center pt-3 flex-1">
                                        <div class="echarts-paying-customer-chart" style="height:100%;width:100%;"></div>
                                    </div>
                                    <div class="mt-3">
                                        <div class="d-flex align-items-center mb-2">
                                            <div class="bullet-item bg-primary me-2"></div>
                                            <h6 class="text-900 fw-semi-bold flex-1 mb-0">Disponíveis</h6>
                                            <h6 class="text-900 fw-semi-bold mb-0">@(novasCampanhasDisponiveisUlitmos30Dias)%</h6>
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <div class="bullet-item bg-primary-100 me-2"></div>
                                            <h6 class="text-900 fw-semi-bold flex-1 mb-0">Encerradas</h6>
                                            <h6 class="text-900 fw-semi-bold mb-0">@(novasCampanhasEncerradasUlitmos30Dias)%</h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
@*        <div class="echart-line-chart-example" style="min-height: 300px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); position: relative;" data-echart-responsive="data-echart-responsive" _echarts_instance_="ec_1686516042133">
            <div style="position: relative; width: 723px; height: 300px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;"><canvas data-zr-dom-id="zr_0" width="723" height="300" style="position: absolute; left: 0px; top: 0px; width: 723px; height: 300px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div class="" style="position: absolute; display: block; border-style: solid; white-space: nowrap; z-index: 9999999; box-shadow: rgba(0, 0, 0, 0.2) 1px 2px 10px; background-color: rgb(239, 242, 246); border-width: 1px; border-radius: 4px; color: rgb(20, 24, 36); font: 14px / 21px &quot;Microsoft YaHei&quot;; padding: 7px 10px; top: 0px; left: 0px; transform: translate3d(546px, 44px, 0px); border-color: rgb(203, 208, 221); pointer-events: none; visibility: hidden; opacity: 0;">
                <div>
                    <h6 class="fs--1 text-700 mb-0">
                        <svg class="svg-inline--fa fa-circle me-1" style="color: #3874ff;" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256z"></path></svg><!-- <span class="fas fa-circle me-1" style="color:#3874ff"></span> Font Awesome fontawesome.com -->
                        December : 1200
                    </h6>
                </div>
            </div>
        </div>*@
    </div>
</section>
<!-- ===============================================-->
<!--    End of Main Content-->
<!-- ===============================================-->
@section Scripts{
    @*    <script src="~/public/assets/js/ecommerce-dashboard.js"></script>
    <script src="~/public/assets/js/echarts-example.js"></script>*@

    <script src="~/public/vendors/echarts/echarts.min.js"></script>
@*    <script src="~/public/assets/js/ecommerce-dashboard.js"></script>*@

    <script>
        const dados = [@teste[0], @teste[1], @teste[2]];

        const totalVendas = [@totalVendasUltimos7Dias[0], 
                             @totalVendasUltimos7Dias[1], 
                             @totalVendasUltimos7Dias[2], 
                             @totalVendasUltimos7Dias[3],
                             @totalVendasUltimos7Dias[4], 
                             @totalVendasUltimos7Dias[5], 
                             @totalVendasUltimos7Dias[6]];

        const novosCondominos7Dias = [@novosCondominosUlitmos7Dias[0],
                                      @novosCondominosUlitmos7Dias[1],
                                      @novosCondominosUlitmos7Dias[2],
                                      @novosCondominosUlitmos7Dias[3],
                                      @novosCondominosUlitmos7Dias[4],
                                      @novosCondominosUlitmos7Dias[5],
                                      @novosCondominosUlitmos7Dias[6],
                                      @novosCondominosUlitmos7Dias[7],
                                      @novosCondominosUlitmos7Dias[8],
                                      @novosCondominosUlitmos7Dias[9],
                                      @novosCondominosUlitmos7Dias[10],
                                      @novosCondominosUlitmos7Dias[11],
                                      @novosCondominosUlitmos7Dias[12],
                                      @novosCondominosUlitmos7Dias[13]];

        const totalProdutosVDisDes7Dias = [@totalProdutosVDisDesUltimos7Dias[0],
                                           @totalProdutosVDisDesUltimos7Dias[1],
                                           @totalProdutosVDisDesUltimos7Dias[2]];

        const totalNovasCampanhas30Dias = [@novasCampanhasUlitmos30Dias[0],
                                           @novasCampanhasUlitmos30Dias[1]];

        const totalVendasPeriodo = [@totalVendasPorPeriodo[0],
                                    @totalVendasPorPeriodo[1],
                                    @totalVendasPorPeriodo[2],
                                    @totalVendasPorPeriodo[3],
                                    @totalVendasPorPeriodo[4],
                                    @totalVendasPorPeriodo[5],
                                    @totalVendasPorPeriodo[6],
                                    @totalVendasPorPeriodo[7],
                                    @totalVendasPorPeriodo[8],
                                    @totalVendasPorPeriodo[9],
                                    @totalVendasPorPeriodo[10],
                                    @totalVendasPorPeriodo[11],
                                    @totalVendasPorPeriodo[12],
                                    @totalVendasPorPeriodo[13],
                                    @totalVendasPorPeriodo[14],
                                    @totalVendasPorPeriodo[15],
                                    @totalVendasPorPeriodo[16],
                                    @totalVendasPorPeriodo[17],
                                    @totalVendasPorPeriodo[18],
                                    @totalVendasPorPeriodo[19],
                                    @totalVendasPorPeriodo[20],
                                    @totalVendasPorPeriodo[21],
                                    @totalVendasPorPeriodo[22],
                                    @totalVendasPorPeriodo[23],
                                    @totalVendasPorPeriodo[24],
                                    @totalVendasPorPeriodo[25],
                                    @totalVendasPorPeriodo[26],
                                    @totalVendasPorPeriodo[27],
                                    @totalVendasPorPeriodo[28],
                                    @totalVendasPorPeriodo[29]];

        const totalVendasPeriodo2 = [@totalVendasPorPeriodo2[0],
                                     @totalVendasPorPeriodo2[1],
                                     @totalVendasPorPeriodo2[2],
                                     @totalVendasPorPeriodo2[3],
                                     @totalVendasPorPeriodo2[4],
                                     @totalVendasPorPeriodo2[5],
                                     @totalVendasPorPeriodo2[6],
                                     @totalVendasPorPeriodo2[7],
                                     @totalVendasPorPeriodo2[8],
                                     @totalVendasPorPeriodo2[9],
                                     @totalVendasPorPeriodo2[10],
                                     @totalVendasPorPeriodo2[11],
                                     @totalVendasPorPeriodo2[12],
                                     @totalVendasPorPeriodo2[13],
                                     @totalVendasPorPeriodo2[14],
                                     @totalVendasPorPeriodo2[15],
                                     @totalVendasPorPeriodo2[16],
                                     @totalVendasPorPeriodo2[17],
                                     @totalVendasPorPeriodo2[18],
                                     @totalVendasPorPeriodo2[19],
                                     @totalVendasPorPeriodo2[20],
                                     @totalVendasPorPeriodo2[21],
                                     @totalVendasPorPeriodo2[22],
                                     @totalVendasPorPeriodo2[23],
                                     @totalVendasPorPeriodo2[24],
                                     @totalVendasPorPeriodo2[25],
                                     @totalVendasPorPeriodo2[26],
                                     @totalVendasPorPeriodo2[27],
                                     @totalVendasPorPeriodo2[28],
                                     @totalVendasPorPeriodo2[29]];

    </script>
    @*<script src="~/src/js/dashboard.js"></script>*@
    <script src="~/src/js/dashboard2.js"></script>

}